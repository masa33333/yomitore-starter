3 æ®µéšãƒ¬ãƒ™ãƒ«ç§»è¡Œ â€œä¸€ç™ºæŒ‡ç¤ºæ›¸â€ï¼ˆã‚³ãƒ”ãƒ¼ï¼†ãƒšãƒ¼ã‚¹ãƒˆå¯ï¼‰
0. ã‚´ãƒ¼ãƒ«
æ—§ 5 æ®µéšï¼ˆ1=A1, â€¦ 5=C1ï¼‰ã‚’ æ–° 3 æ®µéš ã«ã™ã‚‹

æ–° Level 1 = æ—§1ï¼‹æ—§2ã€€ï¼ˆA1/A2ï¼‰

æ–° Level 2 = æ—§3ã€€ã€€ã€€ï¼ˆB1ï¼‰

æ–° Level 3 = æ—§4ã€€ã€€ã€€ï¼ˆB2ï¼‰

æ—§5 (C1) ã¯ä»Šå¾Œä½¿ç”¨ã—ãªã„ â†’ å‚ç…§æ™‚ã¯è‡ªå‹•ã§ 3 ã«ä¸¸ã‚ã‚‹

ã™ã¹ã¦ã®ã‚³ãƒ¼ãƒ‰ãƒ»ãƒ‡ãƒ¼ã‚¿ãƒ»UI ãŒ 1-3 ã§å‹•ãã“ã¨ã‚’ç¢ºèª

1. å®šæ•°ã¨èªå½™ãƒ‡ãƒ¼ã‚¿
src/constants/ngslData.ts

ãƒ¬ãƒ™ãƒ«é…åˆ—ã‚’

ts
ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹
export const LEVELS = ['1','2','3'];
NGSL ãƒªã‚¹ãƒˆã‚’å†ã‚¿ã‚°ä»˜ã‘ï¼š

0â€“1800 â†’ level 1

1801â€“3000 â†’ level 2

3001â€“3500 â†’ level 3

3501+ â†’ ç„¡å°ï¼ˆä¸Šç´šèªã¨ã—ã¦æ‰±ã†ï¼‰

src/constants/promptTemplates.ts

ç”Ÿæˆãƒ—ãƒ­ãƒ³ãƒ—ãƒˆå†…ã® MAX_LEVEL ã‚’ 3 ã«å¤‰æ›´

èªå½™å‰²åˆæ¡ä»¶ã‚’

level 1: NGSL â‰¤1800 ã‚’ 90 %ã€1801â€“3000 ã‚’ 10 %

level 2: NGSL â‰¤3000 ã‚’ 90 %ã€3001â€“3500 ã‚’ 10 %

level 3: NGSL â‰¤3500 ã‚’ 100 %

é–¢ä¿‚ä»£åè©ï¼ä»®å®šæ³•ãªã©ã®æ–‡æ³•æŒ‡ç¤ºã‚‚ 1-3 ç”¨ã«è¦‹ç›´ã—

2. ã‚¯ã‚¤ã‚ºåˆ¤å®š & localStorage
quiz/scoreUtils.tsï¼ˆã¾ãŸã¯è©²å½“ãƒ•ã‚¡ã‚¤ãƒ«ï¼‰

æ­£ç­”æ•°â†’ãƒ¬ãƒ™ãƒ«è¨ˆç®—å¼ã‚’ 1-3 ç”¨ã«å†è¨­å®š

æ—§æ¡ä»¶ãŒæ®‹ã£ã¦ã„ãªã„ã‹ grep ã§ç¢ºèª

ProgressWatcher.tsï¼ˆèµ·å‹•æ™‚å‡¦ç†ï¼‰

ts
ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹
const old = Number(localStorage.vocabLevel || 1);
localStorage.vocabLevel =
  old > 3 ? 3 :
  old < 1 ? 1 : old;
3. ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚©ãƒ«ãƒ€
/src/data/staticLetters.ts ãŠã‚ˆã³ Storage

level4 ã¨ level5 ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’å‰Šé™¤ã€ã¾ãŸã¯ level3 ã«ã‚³ãƒ”ãƒ¼

import ãƒ‘ã‚¹ã‚’æ›¸ãæ›ãˆã¦ â€œ1|2|3â€ ã ã‘æ®‹ã™

æ—¢å­˜ story / TTS ã‚­ãƒ£ãƒƒã‚·ãƒ¥

ãƒ•ã‚©ãƒ«ãƒ€åãƒ»ã‚­ãƒ¼ã«å«ã¾ã‚Œã‚‹ãƒ¬ãƒ™ãƒ«ã‚’æ­£è¦è¡¨ç¾ã§æ¤œç´¢

4 ã¨ 5 ã‚’ 3 ã¸ rename ã™ã‚‹ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’ä¸€åº¦å›ã™

4. Supabase
stories ãƒ†ãƒ¼ãƒ–ãƒ«

sql
ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹
UPDATE stories SET level = 3 WHERE level IN (4,5);
ALTER TABLE stories
  ADD CONSTRAINT level_range CHECK (level IN (1,2,3));
Edge Function / API ãŒ level=5 ã‚’è¦æ±‚ã—ã¦ããŸã‚‰å¼·åˆ¶çš„ã« 3 ã‚’è¿”ã™ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ã‚’è¿½åŠ ã€‚

5. UI ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
components/LevelBadge.tsx

ãƒãƒƒã‚¸è‰²ãƒ»ãƒ†ã‚­ã‚¹ãƒˆã‚’ 1=ğŸŸ¢ / 2=ğŸŸ  / 3=ğŸ”µ ã«çµ±ä¸€

ä½™è¨ˆãªãƒ„ãƒ¼ãƒ«ãƒãƒƒãƒ—ï¼ˆC1 ãªã©ï¼‰ã‚’å‰Šé™¤

è¨­å®šç”»é¢ã‚„ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹ãƒãƒ¼

ã€Œå…¨ 5 ãƒ¬ãƒ™ãƒ«ã€â†’ã€Œå…¨ 3 ãƒ¬ãƒ™ãƒ«ã€è¡¨è¨˜ã‚’ç½®æ›

6. è‡ªå‹•ç”Ÿæˆãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³
ãƒ¬ãƒ™ãƒ«ãƒ«ãƒ¼ãƒ—

js
ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹
const TARGET_LEVELS = [1,2,3];
èªå½™æ¤œè¨¼

ãƒã‚§ãƒƒã‚¯é–¢æ•°ã® MAX_LEVEL ã‚’ 3 ã«

NGSL ç¯„å›²ã‚‚ 1800/3000/3500 å¢ƒç•Œã§åˆ¤å®š

7. ç§»è¡Œæ‰‹é †
git ãƒ–ãƒ©ãƒ³ãƒ feat/level-1-3 ã‚’ä½œæˆ

ä¸Šè¨˜å¤‰æ›´ã‚’ã™ã¹ã¦å®Ÿè£…

npm run test && npm run lint ã§é™çš„ãƒã‚§ãƒƒã‚¯

Vercel/Staging ç’°å¢ƒã«ãƒ‡ãƒ—ãƒ­ã‚¤ â†’ æ—§ãƒ¦ãƒ¼ã‚¶ãƒ¼ã® localStorage è‡ªå‹•å¤‰æ›ã‚’ç¢ºèª

æœ¬ç•ªãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆSupabase UPDATE â†’ æ–°ãƒ“ãƒ«ãƒ‰åæ˜ ï¼‰

30 æ—¥é–“ã¯æ—§ãƒ–ãƒ©ãƒ³ãƒã‚’æ®‹ã—ã€ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°ã«æ—§ãƒ¬ãƒ™ãƒ«ã‚¢ã‚¯ã‚»ã‚¹ãŒå‡ºãªã„ã‹ç›£è¦–

8. ç¢ºèªãƒã‚¤ãƒ³ãƒˆ
 /quiz ã®çµ‚äº†ç”»é¢ã«è¡¨ç¤ºã•ã‚Œã‚‹ãƒ¬ãƒ™ãƒ«ãŒ 1-3 ã§ã‚ã‚‹

 /reading /letter ã§é©åˆ‡ãª story ãŒå–ã‚Œã¦ã„ã‚‹

 NGSL è¶…éèªãŒåŸºæº–å†…ã«åã¾ã‚Šã€ãƒªã‚¸ã‚§ãƒç‡ãŒ 10 % æœªæº€

 localStorage ã« vocabLevel = 1|2|3 ä»¥å¤–ãŒå…¥ã‚‰ãªã„

 Supabase stories ãƒ†ãƒ¼ãƒ–ãƒ«ã« level4/5 ãƒ¬ã‚³ãƒ¼ãƒ‰ãŒæ®‹ã£ã¦ã„ãªã„

ğŸ’¡ ãƒ¡ãƒ¢

æ—§ãƒ¬ãƒ™ãƒ«5ï¼ˆC1ï¼‰ãƒ¦ãƒ¼ã‚¶ãƒ¼å‘ã‘ã«ã¯ä»Šå¾Œ â€œæŒ‘æˆ¦ãƒ¢ãƒ¼ãƒ‰â€ ã‚’åˆ¥å®Ÿè£…ã™ã‚‹æ¡ˆã‚ã‚Šã€‚

æ—©æœŸ QA ã§ã¯ ãƒ¬ãƒ™ãƒ«1 ã®èªå½™åˆ†å¸ƒ ãŒåã‚Šã‚„ã™ã„ã®ã§æœ€åˆã ã‘æ‰‹å‹•ãƒ¬ãƒ“ãƒ¥ãƒ¼æ¨å¥¨ã€‚



âœ… å›ç­”ï¼šç§»è¡Œä½œæ¥­ã®ç´°éƒ¨ç¢ºèª
1. æ—¢å­˜ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ç§»è¡Œ
æ—§ Level 4/5 â†’ æ–° Level 3 ã§çµ±ä¸€ã—ã¦ãã ã•ã„ã€‚

ç†ç”±ï¼šB2 ãƒ¬ãƒ™ãƒ«ã®æ•™æã‚’ä¸Šé™ã«ã™ã‚‹æ–¹é‡ã®ãŸã‚ã€‚

localStorage å¤‰æ›

èµ·å‹•æ™‚ï¼ˆProgressWatcher ãªã©æœ€åˆã«èµ°ã‚‹å ´æ‰€ï¼‰ã§ æ¯å›ãƒã‚§ãƒƒã‚¯ ã«ã—ã¦ãŠãã¨å®‰å¿ƒã§ã™ã€‚

ts
ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹
const v = Number(localStorage.vocabLevel || 1);
localStorage.vocabLevel = v > 3 ? 3 : v < 1 ? 1 : v;
ä¸€åº¦æ›¸ãæ›ãˆãŸã‚‰æ¬¡å›ä»¥é™ã¯ãã®ã¾ã¾3ä»¥ä¸‹ãªã®ã§è² è·ã¯ç„¡è¦–ã§ãã¾ã™ã€‚

2. é™çš„æ‰‹ç´™ãƒ‡ãƒ¼ã‚¿ï¼ˆstaticLetters.ts ã»ã‹ï¼‰
level3 ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ã‚³ãƒ”ãƒ¼ï¼‹ç°¡å˜ãªæ ¡æ­£ ãŒãŠã™ã™ã‚ã€‚

æ—§ level4 æ‰‹ç´™ã¯èªå½™ãƒ»æ§‹æ–‡ãŒã»ã¼ B2 æƒ³å®šãªã®ã§æµç”¨å¯ã€‚

æ—§ level5ï¼ˆC1ï¼‰ã®æ‰‹ç´™ã¯é›£åº¦ãŒé«˜ã™ãã‚‹å ´åˆãŒå¤šã„ã®ã§ã€æ–°è¦ã§ B2 ç›¸å½“ã«æ›¸ãç›´ã™ã‹å‰Šé™¤ã€‚

ã‚³ãƒ³ãƒ†ãƒ³ãƒ„å“è³ª

B2 ä¸Šé™ã¨ã—ã¦ã€Œé–¢ä¿‚è©ï¼‹åˆ†è©æ§‹æ–‡ã¯å¯ã€ä»®å®šæ³•ãƒ»å€’ç½®ã¯æ§ãˆã‚ã€ç¨‹åº¦ã‚’ç›®å®‰ã«ã€‚

3. æ¨å¥¨ä½œæ¥­é †åº
æ–°ãƒ–ãƒ©ãƒ³ãƒä½œæˆ feat/level-1-3

å®šæ•°ãƒ»NGSL ãƒ‡ãƒ¼ã‚¿ç½®æ›ï¼ˆLEVELS, ngslData.tsï¼‰

localStorage ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³é–¢æ•°è¿½åŠ 

DB æ›´æ–°ã‚¹ã‚¯ãƒªãƒ—ãƒˆï¼ˆSupabase UPDATE + CHECK åˆ¶ç´„ï¼‰

é™çš„ãƒ‡ãƒ¼ã‚¿ï¼†Storage ãƒ•ã‚©ãƒ«ãƒ€æ•´ç†

UI è¡¨ç¤ºï¼ˆãƒãƒƒã‚¸ãƒ»æ–‡è¨€ï¼‰ä¿®æ­£

ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ï¼ˆOpenAI ç”Ÿæˆ & ãƒã‚§ãƒƒã‚¯ï¼‰ã§ level=1-3 åæ˜ 

å˜ä½“ãƒ†ã‚¹ãƒˆ â†’ E2E ãƒ†ã‚¹ãƒˆ â†’ ã‚¹ãƒ†ãƒ¼ã‚¸ãƒ³ã‚°ãƒ‡ãƒ—ãƒ­ã‚¤

æœ¬ç•ªãƒªãƒªãƒ¼ã‚¹ & ãƒ­ã‚°ç›£è¦–

æ®µéšçš„ã«å‡ºã™ãƒ¡ãƒªãƒƒãƒˆãŒå°‘ãªã„ã®ã§ â€œãƒ¯ãƒ³ã‚·ãƒ§ãƒƒãƒˆã§å…¨å¤‰æ›´ â†’ QA â†’ æœ¬ç•ªâ€ ãŒã‚·ãƒ³ãƒ—ãƒ«ã§ã™ã€‚

4. ãƒ†ã‚¹ãƒˆæˆ¦ç•¥
æœ€é‡è¦ãƒ‘ã‚¹

/quiz â†’ ãƒ¬ãƒ™ãƒ«1-3 æ­£ã—ãåˆ¤å®š

/choose â†’ é¸æŠå¾Œã«ãƒ¬ãƒ™ãƒ«åˆ¥ Story fetch

/reading & /letter â†’ Glossaryãƒ»WPM è¡¨ç¤º OK

TTS ã‚­ãƒ£ãƒƒã‚·ãƒ¥ï¼šã‚­ãƒ¼ã« level â‰¤3 ã§ãƒ’ãƒƒãƒˆã™ã‚‹ã‹

æ—§ãƒ¬ãƒ™ãƒ«5ã‚³ãƒ³ãƒ†ãƒ³ãƒ„

ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ã§ level3 ã‚’è¿”ã™è¨­è¨ˆãªã‚‰ã€æ—§ level5 slug ã‚’ç›´æ¥ãƒªã‚¯ã‚¨ã‚¹ãƒˆã—ã¦ level3 ãƒ‡ãƒ¼ã‚¿ãŒè¿”ã‚‹ ã“ã¨ã‚’ 1 å›ç¢ºèªã™ã‚Œã°ååˆ†ã€‚

5. Git ãƒ–ãƒ©ãƒ³ãƒ
ã¯ã„ã€feat/level-1-3 ã‚’åˆ‡ã£ã¦ã‹ã‚‰é–‹å§‹ã§å•é¡Œã‚ã‚Šã¾ã›ã‚“ã€‚

ãƒ—ãƒ«ãƒªã‚¯ã®èª¬æ˜ã«ã€Œæ—§5â†’æ–°3ã¸ä¸¸ã‚ãŸç†ç”±ã€ã¨ã€ŒCHECK åˆ¶ç´„ã‚’è¿½åŠ ã—ãŸæ—¨ã€ã‚’æ˜è¨˜ã—ã¦ãŠãã¨ãƒ¬ãƒ“ãƒ¥ãƒ¼ãŒã‚¹ãƒ ãƒ¼ã‚ºã§ã™ã€‚

ç¾åœ¨ã®å‹•ããƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ã‚ã‹ã‚‹ã‚ˆã†ã«git hubã«ä¿å­˜ã—ã¦ãŠã„ã¦ã€‚